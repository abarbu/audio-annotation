<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/html">
  <head>
    <title>Audio annotation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"
    />
    <!-- TODO This is not a CDN! -->
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.1.0/css/bootstrap2/bootstrap-switch.css"
    />
    <link rel="stylesheet" href="bootstro.min.css" />
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/jquery-url-parser/2.3.1/purl.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.1/d3.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdn.jsdelivr.net/npm/jquery.hotkeys@0.1.0/jquery.hotkeys.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/chroma-js/0.5.2/chroma.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"
    ></script>
    <!-- TODO This is not a CDN -->
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.1.0/js/bootstrap-switch.js"
    ></script>
    <script type="text/javascript" src="bootstro.min.js"></script>
    <link href="gui.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div>
      <div class="row">
        <div class="col-xs-2">
          <button
            type="button"
            class="annotation-gui btn btn-warning btn-lg button-spacing"
            id="reset"
          >
            Reset
          </button>
        </div>
        <div class="col-xs-8">
          <div id="loading">
            <h3></h3>
          </div>
        </div>
        <div class="col-xs-2" id="submit-button">
          <button
            type="button"
            class="annotation-gui btn btn-success btn-lg button-spacing"
            id="submit"
          >
            Submit
          </button>
        </div>
      </div>
      <div class="transcription-gui">
        <div class="row">
          <span class="shortcut"></span>
        </div>
        <div class="row">
          <div class="col-xs-offset-1 col-xs-10">
            <div class="panel panel-default">
              <div class="panel-body">
                This task has two stages. In the first you will listen to a very
                short audio clip and transcribe it. In the second stage you're
                going to annotate that clip with additional information.
                Transcribe the clip or use the options to let us know there's no
                speech or that the speech can't be understood.<br />
                We need clean data for our experiments, so please tell us if
                there's something wrong with it; like people speaking at the
                same time. It's ok if there are too many words in the
                transcript, in the next step you can just ignore them.
              </div>
            </div>
            <div class="btn-group">
              <button type="button" class="btn btn-danger" id="play-transcript">
                Play
              </button>
            </div>
            <form role="form">
              <div class="form-group">
                <label for="our-transcript"
                  ><span style="font-weight:normal"
                    >Candidate transcript:</span
                  ></label
                >
                <label id="our-transcript" class="extra-borders invisible"
                  >Loading...</label
                >
                <label
                  ><button
                    type="button"
                    id="provided-transcript"
                    class="btn btn-primary"
                  >
                    Use candidate transcript
                  </button></label
                >
                <input
                  type="text"
                  autocomplete="off"
                  class="form-control"
                  id="transcript-box"
                  placeholder="Enter new transcript"
                />
              </div>
              <button
                type="button"
                id="new-transcript"
                class="btn btn-success"
                type="submit"
              >
                Use new transcript
              </button>
              <br />
              <br />
              <button type="button" id="no-speech" class="btn btn-warning">
                No speech
              </button>
              <button
                type="button"
                id="too-noisy"
                class="btn btn-warning"
                type="submit"
              >
                Too noisy
              </button>
              <button
                type="button"
                id="cant-understand"
                class="btn btn-warning"
                type="submit"
              >
                Can't understand
              </button>
              <button
                type="button"
                id="simultaneous-speakers"
                class="btn btn-warning"
                type="submit"
              >
                People speak over each other
              </button>
            </form>
          </div>
        </div>
      </div>
      <div class="annotation-gui">
        <div class="panel panel-default">
          <div id="help-panel" class="panel-body">
            <div class="col-xs-offset-4 col-xs-2">
              <button type="button" id="intro" class="btn btn-danger">
                Show me how to annotate words
              </button>
            </div>
            <div class="col-xs-2">
              <div class="btn-group">
                <button
                  type="button"
                  id="intro"
                  class="btn btn-danger dropdown-toggle"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  Show keyboard shortcuts
                </button>
                <div class="dropdown-menu">
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>s</kbd> Save annnotations
                  </div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>r</kbd> Fill with reference
                  </div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>c</kbd> Play clip
                  </div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>t</kbd> Stop playing
                  </div>
                  <div class="dropdown-divider"></div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>d</kbd> Delete selection
                  </div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>y</kbd> Play selection
                  </div>
                  <div class="dropdown-divider"></div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>w</kbd> Start word at marker
                  </div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>e</kbd> End word at marker
                  </div>
                  <div class="dropdown-divider"></div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>a</kbd> Toggle audio speed
                  </div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>m</kbd> Mute audio
                  </div>
                  <div class="dropdown-divider"></div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>f</kbd> Save & forward 2s
                  </div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>b</kbd> Save & backard 2s
                  </div>
                  <div class="dropdown-divider"></div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>n</kbd> Forward 2s
                  </div>
                  <div class="dropdown-item dropdown-item-kbd">
                    <kbd>p</kbd> Backward 2s
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="container-wrapper">
          <div id="container">
            <img
              class="img"
              id="spectrogram"
              alt=""
              style="height: 830px; width: 2240px"
            />
            <canvas id="canvas"></canvas>
            <svg id="d3"></svg>
          </div>
        </div>

        <div class="btn-toolbar center" id="controls" role="toolbar">
          <div class="btn-group">
            <button type="button" class="btn btn-default" id="play">
              P<span class="shortcut">l</span>ay from beginning
            </button>
            <button type="button" class="btn btn-default" id="stop">
              S<span class="shortcut">t</span>op
            </button>
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-default" id="start-next-word">
              Start next <span class="shortcut">w</span>ord
            </button>
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-default" id="play-selection">
              Play <span class="shortcut">s</span>election
            </button>
            <button type="button" class="btn btn-default" id="delete-selection">
              <span class="shortcut">D</span>elete selection
            </button>
          </div>
          <div class="btn-group" id="replace-reference">
            <button
              type="button"
              class="btn btn-default"
              id="replace-with-reference-annotation"
            >
              Replace with reference
            </button>
            <button
              type="button"
              class="btn btn-default"
              id="fill-with-reference"
            >
              Fill with <span class="shortcut">r</span>eference
            </button>
          </div>
          <div class="btn-group" id="seek">
            <button type="button" class="btn btn-default" id="back-4-sec">
              - 4s
            </button>
            <button type="button" class="btn btn-default" id="back-2-sec">
              <span class="shortcut">P</span>revious 2s
            </button>
            <button type="button" class="btn btn-default" id="forward-2-sec">
              <span class="shortcut">N</span>ext 2s
            </button>
            <button type="button" class="btn btn-default" id="forward-4-sec">
              + 4s
            </button>
          </div>
          <div class="btn-group" id="save-and-seek">
            <button type="button" class="btn btn-success" id="back-save-4-sec">
              - 4s
            </button>
            <button type="button" class="btn btn-success" id="back-save-2-sec">
              <span class="shortcut">B</span>ack 2s
            </button>
            <button
              type="button"
              class="btn btn-success"
              id="forward-save-2-sec"
            >
              <span class="shortcut">F</span>orward 2s
            </button>
            <button
              type="button"
              class="btn btn-success"
              id="forward-save-4-sec"
            >
              + 4s
            </button>
          </div>
        </div>

        <div style="clear: both" id="transcript-panel">
          <button
            type="button"
            class="btn btn-primary"
            id="edit-transcript"
            style="display: inline"
          >
            Edit transcript
          </button>
          <h3 id="words" class="display-inline"></h3>
          <div id="transcript-entry" class="display-none">
            <input
              type="text"
              autocomplete="off"
              style="width: 50%; display: inline"
              class="form-control"
              id="transcript-input"
              placeholder="Enter new transcript"
            />
          </div>
        </div>

        <div class="row">
          <div class="center" style="padding: 4px">
            <span class="legend">Legend:</span>
            <span class="label label-success">OK</span>
            <span class="label label-warning">Selected</span>
            <span class="label label-info">Not yet annotated</span>
          </div>
        </div>

        <div class="row">
          <div class="center">
            <button
              type="button"
              class="btn btn-primary"
              id="go-to-location"
              style="display: inline"
            >
              Go to
            </button>
            <input
              type="text"
              autocomplete="off"
              style="width: 8%; display: inline; text-align: right"
              class="form-control"
              id="location-input"
              placeholder="Seconds"
              type="number"
            />
            <button
              type="button"
              class="btn btn-primary"
              style="margin-right: 30px;"
              id="go-to-last"
              style="display: inline"
            >
              Go to last
            </button>
            <input
              type="checkbox"
              id="toggle-audio"
              checked
              data-size="large"
              data-label-text="Audio"
            />
            <div id="toggle-speed-div" style="display: inline">
              <input
                type="checkbox"
                id="toggle-speed"
                unchecked
                data-size="large"
                data-label-text="Speed"
                data-on-text="0.5x"
                data-off-text="1x"
              />
            </div>

            <span
              class="legend"
              style="vertical-align: middle; margin-left: 30px; font-size: 150%"
            >
              Reference annotations:</span
            >
            <div class="btn-group" id="annotations"></div>
          </div>
        </div>
      </div>
      <script type="text/javascript" src="gui.js"></script>
    </div>
  </body>
</html>
